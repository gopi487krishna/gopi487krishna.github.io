<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="My Experience on Building and Using Vim Clutch" /><meta name="author" content="Gopi Krishna Menon" /><meta property="og:locale" content="en" /><meta name="description" content="Few weeks back, I was scrolling through r/Neovim on reddit and noticed a post that mentioned about vim clutch. I got intrigued by the idea of using a foot pedal to switch modes in vim and decided to give this project a try." /><meta property="og:description" content="Few weeks back, I was scrolling through r/Neovim on reddit and noticed a post that mentioned about vim clutch. I got intrigued by the idea of using a foot pedal to switch modes in vim and decided to give this project a try." /><link rel="canonical" href="/posts/My-Experience-On-Building-and-using-Vim-Clutch/" /><meta property="og:url" content="/posts/My-Experience-On-Building-and-using-Vim-Clutch/" /><meta property="og:site_name" content="cool-dev" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-01T00:00:00+05:30" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="My Experience on Building and Using Vim Clutch" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Gopi Krishna Menon" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Gopi Krishna Menon"},"dateModified":"2022-10-02T10:44:01+05:30","datePublished":"2022-10-01T00:00:00+05:30","description":"Few weeks back, I was scrolling through r/Neovim on reddit and noticed a post that mentioned about vim clutch. I got intrigued by the idea of using a foot pedal to switch modes in vim and decided to give this project a try.","headline":"My Experience on Building and Using Vim Clutch","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/My-Experience-On-Building-and-using-Vim-Clutch/"},"url":"/posts/My-Experience-On-Building-and-using-Vim-Clutch/"}</script><title>My Experience on Building and Using Vim Clutch | cool-dev</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="cool-dev"><meta name="application-name" content="cool-dev"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/site_img/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">cool-dev</a></div><div class="site-subtitle font-italic">Personal Experiences, Tips and Tricks related to Linux</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/gopi487krishna" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['krishnagopi487','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>My Experience on Building and Using Vim Clutch</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>My Experience on Building and Using Vim Clutch</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Gopi Krishna Menon </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Oct 1, 2022, 12:00 AM +0530" >Oct 1<i class="unloaded">2022-10-01T00:00:00+05:30</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 2, 2022, 10:44 AM +0530" >Oct 2<i class="unloaded">2022-10-02T10:44:01+05:30</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1197 words">6 min read</span></div></div><div class="post-content"><p>Few weeks back, I was scrolling through <a href="https://www.reddit.com/r/neovim/">r/Neovim</a> on reddit and noticed a post that mentioned about <code class="language-plaintext highlighter-rouge">vim clutch</code>. I got intrigued by the idea of using a foot pedal to switch modes in vim and decided to give this project a try.</p><p>So before starting, lets understand what vim clutch is and discuss the motivation behind building such a device.</p><h2 id="what-is-vim-clutch">What is VIM Clutch?</h2><p>vim clutch is a footpedal that allows you to go to to insert mode when the pedal is pressed and to normal mode when the pedal is released. It is primarily designed as a means of convenience and to improve the text editing speed of users using vim/neovim.</p><p>The idea for this device was proposed by <a href="https://github.com/alevchuk/vim-clutch">Aleksandr Levchuk</a></p><p><img data-proofer-ignore data-src="/assets/posts_img/2022-10-01-VImClutchExp/original-clutch.jpg" alt="OriginalClutch" /></p><p>To give you guys a comparison, you know clutches in cars right? They basically serve as the mechanism for changing gears in a car (They are used for connecting/disconnecting the engine from transmission). Similar to that, vim clutch is used for switching from one mode to another in vim/neovim.</p><h2 id="motivation-behind-vim-clutch">Motivation behind VIM Clutch</h2><ul><li>Pressing <code class="language-plaintext highlighter-rouge">ESC</code> causes your hand to move away from homerow resulting in slight discomfort.<li>To improve your typing speed and reduce the strain on ring finger</ul><h2 id="why-am-i-doing-it">Why am I doing it?</h2><ul><li>From the past few months, I have become a hardcore neovim user and have faced this problem of pressing Escape especially on a full sized keyboard<li>Because its a fun project and would help me learn something new</ul><h2 id="my-modifications">My Modifications</h2><ul><li>Pressing the pedal all the time to remain in <code class="language-plaintext highlighter-rouge">Insert</code> mode is really a pain. So in my version the pedal acts a button where pressing the pedal results in switching to normal mode from any mode<li>In future I plan to use various combinations of presses to trigger different modes and possibly make my life easier.</ul><p>Now that the you have understood the definition and motivation behind this project, lets get to the real stuff and start building this device.</p><p><strong>Note</strong> : The instructions given here were performed on a Gentoo. If you wish to do Arduino development on Gentoo head over to <a href="https://wiki.gentoo.org/wiki/Arduino">https://wiki.gentoo.org/wiki/Arduino</a> to complete the prerequisites.</p><h2 id="components-required">Components Required</h2><ul><li><a href="https://amzn.eu/d/hOcHe6V">Arduino Board</a><li><a href="https://amzn.eu/d/3CVp30r">Electronic Foot Pedal</a><li><a href="https://amzn.eu/d/3zbHn8s">Jumper wires</a></ul><h2 id="building-the-hardware">Building the hardware</h2><p>Its pretty simple, since our footpedal is acting as the switch,</p><ul><li>Connect the live wire from the footpedal into the 5V rail on your Arduino Board.<li>Connect the ground wire from the footpedal into the ground pin of your Arduino Board.<li>Connect the data wire from the footpedal into the 8th digital pin of your Arduino board.</ul><h2 id="flashingcompiling-the-program-to-the-arduino">Flashing/Compiling the program to the Arduino</h2><ul><li>Clone the repository from github using this command<div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git clone <span class="nt">--recurse-submodules</span> <span class="nt">-j8</span>  git@github.com:gopi487krishna/nvim-clutch.git
</pre></table></code></div></div><li><code class="language-plaintext highlighter-rouge">cd</code> into the newly cloned directory<li>Open the file <code class="language-plaintext highlighter-rouge">nvim_clutch_sketch.ino</code> in Arduino IDE and upload it to the Arduino Board</ul><h3 id="what-the-sketch-does">What the sketch does?</h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span text-data=" Cpp "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="k">const</span> <span class="kt">int</span> <span class="n">footpedal_pin</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span> <span class="c1">// Digital Pin 8 to Read the Input from Pedal</span>
<span class="kt">int</span> <span class="n">footpedal_previous_state</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">(){</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">footpedal_pin</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span> <span class="c1">// We need to recieve data from  footpedal</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">loop</span><span class="p">(){</span>
  <span class="kt">int</span> <span class="n">footpedal_current_state</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">footpedal_pin</span><span class="p">);</span> <span class="c1">// Check if pressed or released</span>
  <span class="k">if</span><span class="p">(</span><span class="n">footpedal_current_state</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">footpedal_previous_state</span> <span class="o">!=</span> <span class="n">footpedal_current_state</span><span class="p">){</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    
  <span class="p">}</span>   
  <span class="n">footpedal_previous_state</span> <span class="o">=</span> <span class="n">footpedal_current_state</span><span class="p">;</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>Well to give a brief explaination, this code sets the 8th Digital pin as Digital Input and prints <code class="language-plaintext highlighter-rouge">1</code> into the serial port if the button was pressed.<li>The if condition makes sure that <code class="language-plaintext highlighter-rouge">1</code> is only sent when the button was pressed. Holding the pedal in pressed state will not send multiple <code class="language-plaintext highlighter-rouge">1</code> or <code class="language-plaintext highlighter-rouge">ON</code> state to the program.</ul><h2 id="program-to-send-the-keyboard-event">Program to send the keyboard event</h2><h3 id="some-important-points-to-note">Some Important Points to Note</h3><ul><li><p>Here I had a choice to either write a kernel driver or a userspace program to handle the communication. I decided to go with a userspace program since its simple serial communication.</p><li><p>To read the data from the serial port, I decided to use a library called <a href="https://github.com/gbmhunter/CppLinuxSerial.git">CppLinuxSerial</a> It hides all the complexity of performing serial communication and gives a simple interface to work with serial ports.</p><li><p>To send the keyboard sequence, I use a library called <code class="language-plaintext highlighter-rouge">libxdo</code>. Its a simple library for simulating keyboard input and mouse activity. And as the clever ones among you guessed it, yes it requires Xorg server to work. My usecase was within a X environment and therefore I decided to go through this route. You can write a kernel driver to send keyboard sequence directly without requiring an Xorg server.</p></ul><h2 id="steps-to-compile-and-install-the-nclutch-program">Steps to compile and install the nclutch program</h2><ul><li>Navigate into the github repo that you clone in the previous step.<li>Create a new folder called build<li><code class="language-plaintext highlighter-rouge">cd</code> into that folder and enter<div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cmake <span class="nt">-DBUILD_TESTS</span><span class="o">=</span>OFF ..
</pre></table></code></div></div><li>Now run make to build the program.<li>Run make install to install the program into your system</ul><script id="asciicast-4BjBsjfJVasiHHm3znUR4pYQb" src="https://asciinema.org/a/4BjBsjfJVasiHHm3znUR4pYQb.js" async=""></script><h3 id="some-important-points-to-note-1">Some Important Points to Note</h3><ul><li>In order to understand what the program does, please take a look inside nclutch directory. The code is self explanatory in nature and quite easy to follow</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span text-data=" Cpp "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;CppLinuxSerial/SerialPort.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;xdo.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>

  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">filename</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Error : Please provide the path to the device</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="cm">/*Screen context*/</span>
  <span class="n">xdo_t</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="n">xdo_new</span><span class="p">(</span><span class="s">":0.0"</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Error : Failed to create new instance of xdo</span><span class="se">\n</span><span class="s"> "</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">mn</span><span class="o">::</span><span class="n">CppLinuxSerial</span><span class="o">::</span><span class="n">SerialPort</span> <span class="n">serialport</span><span class="p">(</span>
      <span class="n">filename</span><span class="p">,</span> <span class="n">mn</span><span class="o">::</span><span class="n">CppLinuxSerial</span><span class="o">::</span><span class="n">BaudRate</span><span class="o">::</span><span class="n">B_9600</span><span class="p">,</span>
      <span class="n">mn</span><span class="o">::</span><span class="n">CppLinuxSerial</span><span class="o">::</span><span class="n">NumDataBits</span><span class="o">::</span><span class="n">EIGHT</span><span class="p">,</span> <span class="n">mn</span><span class="o">::</span><span class="n">CppLinuxSerial</span><span class="o">::</span><span class="n">Parity</span><span class="o">::</span><span class="n">NONE</span><span class="p">,</span>
      <span class="n">mn</span><span class="o">::</span><span class="n">CppLinuxSerial</span><span class="o">::</span><span class="n">NumStopBits</span><span class="o">::</span><span class="n">ONE</span><span class="p">);</span>

  <span class="cm">/*Block on read and wait until we get atleast 1 byte*/</span>
  <span class="n">serialport</span><span class="p">.</span><span class="n">SetTimeout</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

  <span class="cm">/*Open the file for communication*/</span>
  <span class="n">serialport</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>

  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">readData</span><span class="p">;</span> <span class="c1">// Dummy var for reading a byte</span>

  <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">serialport</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">readData</span><span class="p">);</span>

    <span class="cm">/*Send escape key to the focused window*/</span>
    <span class="n">xdo_send_keysequence_window</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">CURRENTWINDOW</span><span class="p">,</span> <span class="s">"Escape"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">serialport</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
  <span class="k">delete</span> <span class="n">x</span><span class="p">;</span>

  <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>When running <code class="language-plaintext highlighter-rouge">nclutch</code> you are required to pass the device path as the argument. Run<div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>dmesg | <span class="nb">grep </span>cdc 
</pre></table></code></div></div><p>to get the device name</p></ul><script id="asciicast-NdbhdXjytSvxFgaruK3cjAazA" src="https://asciinema.org/a/NdbhdXjytSvxFgaruK3cjAazA.js" async=""></script><h2 id="post-installation">Post Installation</h2><ul><li>After building nclutch program, you can create a simple service script to start the program automatically after the system boots<li>In my case, I spawn it as a daemon within my window manager script. Please refer to the documentation of your window manager to understand how to spawn a daemon after startup</ul><script id="asciicast-RQRDdizZDok9glLLeFYxVPrUX" src="https://asciinema.org/a/RQRDdizZDok9glLLeFYxVPrUX.js" async=""></script><h2 id="how-is-the-experience-so-far">How is the experience so far?</h2><p><img data-proofer-ignore data-src="/assets/posts_img/2022-10-01-VImClutchExp/my_clutch.jpeg" alt="My Clutch" /></p><ul><li>I use Vim Clutch with my desktop and tbh its an improved experience.<li>I have not become the fastest typist in town but the strain on my ring finger has certainly reduced</ul><h2 id="special-thanks-">Special Thanks !</h2><p>A special thanks to my friend <a href="https://github.com/NikhilKumar1999">Nikhil Kumar</a> for helping me complete this project. This was my very first attempt at working with hardware stuff and his excellent knowledge in embedded electronics helped me get started easily. Also his deep insights on how this project can be improved further (such as using low cost board, introducing new combinations) is really interesting and I am planning to implement them further down the road.</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/saturday-posts/" class="post-tag no-text-decoration" >Saturday-Posts</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=My Experience on Building and Using Vim Clutch - cool-dev&url=/posts/My-Experience-On-Building-and-using-Vim-Clutch/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=My Experience on Building and Using Vim Clutch - cool-dev&u=/posts/My-Experience-On-Building-and-using-Vim-Clutch/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=My Experience on Building and Using Vim Clutch - cool-dev&url=/posts/My-Experience-On-Building-and-using-Vim-Clutch/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/How-to-Implement-a-System-Call-In-Linux/">How to Implement a System Call in Linux</a><li><a href="/posts/My-Experience-On-Building-and-using-Vim-Clutch/">My Experience on Building and Using Vim Clutch</a><li><a href="/posts/Fixing-Non-Booting-Kernel-Based-On-Custom-Config/">Fixing a non booting kernel based on custom kernel config file</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/saturday-posts/">Saturday-Posts</a> <a class="post-tag" href="/tags/quickfix/">quickfix</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/How-to-Implement-a-System-Call-In-Linux/"><div class="card-body"> <span class="timeago small" >Nov 12<i class="unloaded">2022-11-12T00:00:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to Implement a System Call in Linux</h3><div class="text-muted small"><p> R In this post we will learn about how to implement a simple system call in Linux that will print Invoked Hello System Call into the kernel log buffer. Background Following files will be modifie...</p></div></div></a></div><div class="card"> <a href="/posts/Fixing-Non-Booting-Kernel-Based-On-Custom-Config/"><div class="card-body"> <span class="timeago small" >Sep 20<i class="unloaded">2022-09-20T00:00:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Fixing a non booting kernel based on custom kernel config file</h3><div class="text-muted small"><p> Recently I was trying to migrate my kernel config across Virtual Box, VMware and Qemu based VM’s and noticed that in some of the cases, I was not able to boot into the kernel at all. I did enable v...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Fixing-Non-Booting-Kernel-Based-On-Custom-Config/" class="btn btn-outline-primary" prompt="Older"><p>Fixing a non booting kernel based on custom kernel config file</p></a> <a href="/posts/How-to-Implement-a-System-Call-In-Linux/" class="btn btn-outline-primary" prompt="Newer"><p>How to Implement a System Call in Linux</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/gopi487krishna">Gopi Krishna Menon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/saturday-posts/">Saturday Posts</a> <a class="post-tag" href="/tags/quickfix/">quickfix</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
